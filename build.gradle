/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id 'application'
    id 'checkstyle'
    id 'pmd'
    id 'maven-publish'
}

java.sourceCompatibility "1.16"
java.targetCompatibility "1.16"

group = 'edu.rit.iste-422'
version = '1.0-SNAPSHOT'

apply plugin: 'java'

ext {
    javaMainClass = 'RunEdgeConvert'
}

test {
    testLogging.showStandardStreams = true
}

application {
    mainClass = javaMainClass
}

task runEdgeConnectorTest(type: JavaExec) {
    group = "Execution"
    description = "Run EdgeConnectorTest class"
    classpath = sourceSets.test.runtimeClasspath
    main = "EdgeConnectorTest"
}

repositories {
    mavenLocal()
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
}

checkstyle {
  configFile file("${project.rootDir}/config/checkstyle/sun_checks.xml")
}

tasks.withType(Checkstyle) {
	reports {
		html.required = true
	}
}

pmd {
  ignoreFailures = true
  consoleOutput = true
  ruleSets = [
	"category/java/errorprone.xml", 
	// "category/java/design.xml", 
	"category/java/performance.xml"
	] 
}

dependencies {
    implementation 'junit:junit:4.12'
    implementation 'com.googlecode.json-simple:json-simple:1.1.1'
    implementation 'org.hamcrest:hamcrest-core:1.3'
}

publishing {
    publications {
        maven(MavenPublication) {
            from(components.java)
        }
    }
}
